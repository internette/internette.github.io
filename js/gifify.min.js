var _=self.Gifify=function(t){this.selector=t.selector,this.tooltip_height=125};_.prototype={get init_elms(){return this.getAllElements(this.selector)},getAllElements:function(t){return document.querySelectorAll(t)},cleanedQuery:function(t){return console.log(t),t.match(/\s/gi)?t.replace(/\s/gi,"+").toLowerCase():t.toLowerCase()},createTooltipImg:function(t,e){var n=document.createElement("img");return n.src=e,n.style.width=t+"px",n},createConditional:function(t,e,n){return t?e():n()},styledToolTip:function(t,e,n){return t.id="gifify-tooltip",t.style.top=this.topPosition(e),t.style.left=this.leftPosition(e,n),t.className=this.combineClasses(e,n),t},topPosition:function(t){return this.createConditional(t.getBoundingClientRect().top<this.tooltip_height,function(){return t.getBoundingClientRect().top+t.getBoundingClientRect().height+10+"px"},function(){return t.getBoundingClientRect().top-$this.tooltip_height-10+"px"})},leftPosition:function(t,e){return this.createConditional(t.getBoundingClientRect().left<e,function(){return t.getBoundingClientRect().left+"px"},function(){return $this.createConditional(t.getBoundingClientRect().left>window.innerWidth-e,function(){return window.innerWidth-e-35+"px"},function(){return t.getBoundingClientRect().left+t.getBoundingClientRect().width/2-(e+10)/2+"px"})})},combineClasses:function(t,e){var n="",i=this;return n+=this.createConditional(t.getBoundingClientRect().top<this.tooltip_height,function(){return"bottom"},function(){return"top"}),n+=" ",n+=this.createConditional(t.getBoundingClientRect().left<e,function(){return"left"},function(){return i.createConditional(t.getBoundingClientRect().left>window.innerWidth-e,function(){return"right"},function(){return""})}),n=n.trim()},createGifToolTip:function(t,e){var n=this.styledToolTip(document.createElement("div"),e,t.width/2),i=this.createTooltipImg(t.width/2,t.src);return n.appendChild(i),n},addTooltipToBody:function(t,e){var n=this.createGifToolTip(t,e);document.body.appendChild(n)},randInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},getRandomImage:function(t){var e=t[this.randInt(0,t.length)];return e.hasOwnProperty("images")?e.images.fixed_height:e.fixed_height},imgProperties:function(t){return{src:t.url,width:parseInt(t.width)}},parsedResponseData:function(t){return JSON.parse(t).data},initializeTooltip:function(t,e){var n=this.parsedResponseData(t),i=this.imgProperties(this.getRandomImage(n));this.addTooltipToBody(i,e),this.fadeIn(document.getElementById("gifify-tooltip"))},fadeIn:function(t){var e=this;Number(t.style.opacity)<1&&(t.style.opacity=Number(t.style.opacity)+.25,t.className.match(/top/gi)?t.style.top=parseInt(t.style.top.slice(0,-2))-2+"px":t.style.top=parseInt(t.style.top.slice(0,-2))+2+"px",setTimeout(function(){return e.fadeIn(t)},20))},apiCall:function(t){var e=this,n=new XMLHttpRequest;n.open("GET","http://api.giphy.com/v1/gifs/search?q="+this.cleanedQuery(t.innerHTML)+"&api_key=dc6zaTOxFJmzC"),n.send(null),n.onreadystatechange=function(){4===n.readyState&&(200===n.status?e.initializeTooltip(n.responseText,t):console.error("There was a problem"))}},fadeOut:function(t){var e=this;Number(t.style.opacity)>0?(t.style.opacity=Number(t.style.opacity)-.25,t.style.top=Number(t.style.top.slice(0,-2))+2+"px",setTimeout(function(){return e.fadeOut(t)},30)):t.parentNode.removeChild(t)},gifify:function(){for(var t=0;t<this.getAllElements(this.selector).length;t++)$this=this,this.init_elms[t].addEventListener("mouseenter",function(t){setTimeout(function(){$this.apiCall(t.target)},100)}),$this.init_elms[t].addEventListener("mouseout",function(){for(var t=document.querySelectorAll("#gifify-tooltip"),e=0;e<t.length;e++){var n=t[e];$this.fadeOut(n)}})}};var Wrapper=function(t){return Wrapper.prototype=_.prototype,Wrapper.fn=_.prototype,new Gifify({selector:t})};$=Wrapper;